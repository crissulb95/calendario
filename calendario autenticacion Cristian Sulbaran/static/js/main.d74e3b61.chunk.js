(this.webpackJsonpcalendario=this.webpackJsonpcalendario||[]).push([[0],{176:function(e,t,n){},177:function(e,t,n){"use strict";n.r(t);var a=n(3),c=n(0),r=n(10),o=n.n(r),s=n(14),i=n(48),l=n(13),u=n(24),j=n.n(u),b=n(39),d=n(31),m=n.n(d),O="https://mern-calendar-api.herokuapp.com/api",f=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",a="".concat(O,"/").concat(e);return"GET"===n?fetch(a):fetch(a,{method:n,headers:{"Content-type":"application/json"},body:JSON.stringify(t)})},p=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",a="".concat(O,"/").concat(e),c=localStorage.getItem("token")||"";return"GET"===n?fetch(a,{method:n,headers:{"x-token":c}}):fetch(a,{method:n,headers:{"Content-type":"application/json","x-token":c},body:JSON.stringify(t)})},h="[UI] Open modal",v="[UI] Close modal",g="[CALENDAR] set active",x="[CALENDAR] add new event",y="[CALENDAR] clear active event",N="[CALENDAR] update event",w="[CALENDAR] delete event",k="[AUTH] finish checking login state",C="[AUTH] login",E="[AUTH] logout",S=function(e){return{type:C,payload:e}},D=function(){return{type:k}},A=function(){return{type:E}},T=n(17),I=n(35),P=n(7),M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(c.useState)(e),n=Object(T.a)(t,2),a=n[0],r=n[1],o=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e;r(t)},s=function(e){var t=e.target,n=t.name,c=t.value;r(Object(P.a)(Object(P.a)({},a),{},Object(I.a)({},n,c)))},i=function(){var e=Object(b.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r((function(e){return t=e}));case 2:return e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return[a,s,i,o]},R=function(){var e=Object(s.b)(),t=M({loginMail:"elpin1995@gmail.com",loginPassword:"123123123"}),n=Object(T.a)(t,2),c=n[0],r=n[1],o=M({registerMail:"",registerName:"",registerPassword:"123123123",registerPassword2:"123123123"}),i=Object(T.a)(o,2),l=i[0],u=i[1],d=c.loginMail,O=c.loginPassword,p=l.registerMail,h=l.registerPassword,v=l.registerName,g=l.registerPassword2;return Object(a.jsx)("div",{className:"container login-container",children:Object(a.jsxs)("div",{className:"row",children:[Object(a.jsxs)("div",{className:"col-md-6 login-form-1",children:[Object(a.jsx)("h3",{children:"Ingreso"}),Object(a.jsxs)("form",{onSubmit:function(t){var n,a;t.preventDefault(),e((n=d,a=O,function(){var e=Object(b.a)(j.a.mark((function e(t){var c,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f("auth",{email:n,password:a},"POST");case 2:return c=e.sent,e.next=5,c.json();case 5:(r=e.sent).exito?(localStorage.setItem("token",r.token),localStorage.setItem("token-init-day",(new Date).getTime()),t(S({uid:r.uid,name:r.name}))):m.a.fire("Error",r.msg,"error");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))},children:[Object(a.jsx)("div",{className:"form-group",children:Object(a.jsx)("input",{type:"text",className:"form-control",placeholder:"Correo",name:"loginMail",value:d,onChange:r})}),Object(a.jsx)("div",{className:"form-group",children:Object(a.jsx)("input",{type:"password",className:"form-control",placeholder:"Contrase\xf1a",name:"loginPassword",value:O,onChange:r})}),Object(a.jsx)("div",{className:"form-group",children:Object(a.jsx)("input",{type:"submit",className:"btnSubmit",value:"Login"})})]})]}),Object(a.jsxs)("div",{className:"col-md-6 login-form-2",children:[Object(a.jsx)("h3",{children:"Registro"}),Object(a.jsxs)("form",{onSubmit:function(t){if(t.preventDefault(),h!==g)return m.a.fire("Error","Las contrase\xf1as deben ser iguales","error");var n,a,c;e((n=p,a=h,c=v,function(){var e=Object(b.a)(j.a.mark((function e(t){var r,o;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f("auth/new",{email:n,password:a,name:c},"POST");case 2:return r=e.sent,e.next=5,r.json();case 5:(o=e.sent).exito?(localStorage.setItem("token",o.token),localStorage.setItem("token-init-day",(new Date).getTime()),t(S({uid:o.uid,name:o.name}))):m.a.fire("Error",o.msg,"error");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))},children:[Object(a.jsx)("div",{className:"form-group",children:Object(a.jsx)("input",{type:"text",className:"form-control",placeholder:"Nombre",name:"registerName",value:v,onChange:u})}),Object(a.jsx)("div",{className:"form-group",children:Object(a.jsx)("input",{type:"email",className:"form-control",placeholder:"Correo",name:"registerMail",value:p,onChange:u})}),Object(a.jsx)("div",{className:"form-group",children:Object(a.jsx)("input",{type:"password",className:"form-control",placeholder:"Contrase\xf1a",name:"registerPassword",value:h,onChange:u})}),Object(a.jsx)("div",{className:"form-group",children:Object(a.jsx)("input",{type:"password",className:"form-control",placeholder:"Repita la contrase\xf1a",name:"registerPassword2",value:g,onChange:u})}),Object(a.jsx)("div",{className:"form-group",children:Object(a.jsx)("input",{type:"submit",className:"btnSubmit",value:"Crear cuenta"})})]})]})]})})},L=function(){var e=Object(s.c)((function(e){return e.auth})).name,t=Object(s.b)();return Object(a.jsxs)("div",{className:"navbar navbar-dark bg-dark mb-4 px-4",children:[Object(a.jsx)("span",{className:"navbar-brand",children:e}),Object(a.jsxs)("button",{className:"btn btn-outline-warning",onClick:function(){t((function(e){localStorage.clear(),e(A())}))},children:[Object(a.jsx)("i",{className:"fas fa-sign-out-alt"}),Object(a.jsx)("span",{children:"Salir"})]})]})},_=function(e){var t=e.event,n=t.title,c=t.user;return Object(a.jsxs)("div",{children:[Object(a.jsxs)("h4",{children:[" ",n," "]}),Object(a.jsxs)("p",{children:["- ",c.name," "]})]})},H=n(72),U=n.n(H),G=n(71),V=n.n(G),F=n(20),J=n.n(F),q=(n(113),function(){return{type:h}}),z=function(){return{type:y}},B={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)"}};V.a.setAppElement("#root");var X=J()().minutes(0).seconds(0).add(1,"hours"),K=X.clone().add(1,"hours"),Q={title:"",notes:"",start:X.toDate(),end:K.toDate()},W=function(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.ui})).modalOpen,n=Object(s.c)((function(e){return e.calendar})).activeEvent,r=Object(c.useState)(X.toDate()),o=Object(T.a)(r,2),i=o[0],l=o[1],u=Object(c.useState)(K.toDate()),j=Object(T.a)(u,2),b=j[0],d=j[1],O=Object(c.useState)(Q),f=Object(T.a)(O,2),p=f[0],h=f[1],g=p.notes,y=p.title,w=p.start,k=p.end,C=function(e){var t=e.target;h(Object(P.a)(Object(P.a)({},p),{},Object(I.a)({},t.name,t.value)))},E=Object(c.useState)(!0),S=Object(T.a)(E,2),D=S[0],A=S[1],M=function(){e({type:v}),e(z()),h(Q)};return Object(c.useEffect)((function(){h(n||Q)}),[h,n]),Object(a.jsxs)(V.a,{isOpen:t,onRequestClose:M,closeTimeoutMS:250,style:B,className:"modal",overlayClassName:"modal-fondo",children:[Object(a.jsxs)("h2",{children:[" ",n?"Editar evento":"Nuevo evento"," "]}),Object(a.jsx)("hr",{}),Object(a.jsxs)("form",{className:"container",onSubmit:function(t){t.preventDefault();var a=J()(w),c=J()(k);if(a.isAfter(c))return console.log("Tiene que ser mayor"),m.a.fire("Error","La fecha de fin tiene que ser mayor a la fecha de inicio","error");y.trim().length<2&&A(!1),e(n?{type:N,payload:p}:function(e){return{type:x,payload:e}}(Object(P.a)(Object(P.a)({},p),{},{id:(new Date).getTime(),user:{_id:"67vb324b",name:"Momoy"}}))),A(!0),M(),console.log(p,a,c)},children:[Object(a.jsxs)("div",{className:"form-group d-flex flex-column",children:[Object(a.jsx)("label",{className:"mb-1",children:"Fecha y hora inicio"}),Object(a.jsx)(U.a,{className:"form-control",value:i,selected:i,onChange:function(e){console.log(e),l(e),h(Object(P.a)(Object(P.a)({},p),{},{start:e}))}})]}),Object(a.jsxs)("div",{className:"form-group d-flex flex-column",children:[Object(a.jsx)("label",{className:"mb-1",children:"Fecha y hora fin"}),Object(a.jsx)(U.a,{className:"form-control",value:b,selected:b,minDate:i,onChange:function(e){console.log(e),d(e),h(Object(P.a)(Object(P.a)({},p),{},{start:e}))}})]}),Object(a.jsx)("hr",{}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{children:"Titulo y notas"}),Object(a.jsx)("input",{type:"text",className:"form-control ".concat(!D&&"is-invalid"),placeholder:"T\xedtulo del evento",name:"title",value:y,onChange:C,autoComplete:"off"}),Object(a.jsx)("small",{id:"emailHelp",className:"form-text text-muted",children:"Una descripci\xf3n corta"})]}),Object(a.jsxs)("div",{className:"form-group mt-4",children:[Object(a.jsx)("textarea",{type:"text",className:"form-control",placeholder:"Notas",rows:"5",value:g,onChange:C,name:"notes"}),Object(a.jsx)("small",{id:"emailHelp",className:"form-text text-muted",children:"Informaci\xf3n adicional"})]}),Object(a.jsxs)("button",{type:"submit",className:"btn btn-block btn-outline-primary mt-4",children:[Object(a.jsx)("i",{className:"far fa-save"}),Object(a.jsx)("span",{children:" Guardar"})]})]})]})},Y=n(77),Z={allDay:"Todo el d\xeda",previous:"<",next:">",today:"Hoy",month:"Mes",week:"Semana",day:"D\xeda",agenda:"Agenda",date:"Fecha",time:"Hora",event:"Evento",noEventsInRange:"No hay eventos en este rango",showMore:function(e){return"+ Ver m\xe1s (".concat(e,")")}},$=(n(173),n(174),function(){var e=Object(s.b)();return Object(a.jsx)("button",{style:{zIndex:"10"},className:"btn btn-primary fab",onClick:function(){e(q())},children:Object(a.jsx)("i",{className:"fas fa-plus"})})}),ee=function(){var e=Object(s.b)();return Object(a.jsxs)("button",{className:"btn btn-danger fab-danger",onClick:function(){e({type:w})},children:[Object(a.jsx)("i",{className:"fas fa-trash"}),Object(a.jsx)("span",{children:" Borrar evento "})]})};J.a.locale("es");var te=Object(Y.b)(J.a),ne=function(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.calendar})),n=t.events,r=t.activeEvent,o=Object(c.useState)(localStorage.getItem("lastView")||"month"),i=Object(T.a)(o,2),l=i[0],u=i[1];return Object(a.jsxs)("div",{className:"calendar-screen",children:[Object(a.jsx)(L,{}),Object(a.jsx)(Y.a,{localizer:te,events:n,messages:Z,startAccessor:"start",endAccessor:"end",onDoubleClickEvent:function(t){e(q())},onSelectEvent:function(t){console.log(t),e({type:g,payload:t})},onView:function(e){u(e),localStorage.setItem("lastView",e)},view:l,onSelectSlot:function(t){e(z())},selectable:!0,eventPropGetter:function(e,t,n,a){return{style:{backgroundColor:"#0608F0",borderRadius:"0px",opacity:.8,display:"block",color:"#fff"}}},components:{event:_}}),Object(a.jsx)($,{}),r&&Object(a.jsx)(ee,{}),Object(a.jsx)(W,{})]})},ae=n(56),ce=function(e){var t=e.isAuth,n=e.component,c=Object(ae.a)(e,["isAuth","component"]);return Object(a.jsx)(l.b,Object(P.a)(Object(P.a)({},c),{},{component:function(e){return t?Object(a.jsx)(n,Object(P.a)({},e)):Object(a.jsx)(l.a,{to:"/login"})}}))},re=function(e){var t=e.isAuth,n=e.component,c=Object(ae.a)(e,["isAuth","component"]);return Object(a.jsx)(l.b,Object(P.a)(Object(P.a)({},c),{},{component:function(e){return t?Object(a.jsx)(l.a,{to:"/"}):Object(a.jsx)(n,Object(P.a)({},e))}}))};function oe(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.auth})),n=t.checking,r=t.uid;return console.log(n),Object(c.useEffect)((function(){e(function(){var e=Object(b.a)(j.a.mark((function e(t){var n,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p("auth/renew");case 2:return n=e.sent,e.next=5,n.json();case 5:(a=e.sent).exito?(localStorage.setItem("token",a.token),localStorage.setItem("token-init-day",(new Date).getTime()),t(S({uid:a.uid,name:a.name}))):t(D());case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[e]),n?Object(a.jsx)("h3",{children:"Cargando..."}):Object(a.jsx)(i.a,{children:Object(a.jsx)("div",{children:Object(a.jsxs)(l.d,{children:[Object(a.jsx)(re,{exact:!0,path:"/login",component:R,isAuth:!!r}),Object(a.jsx)(ce,{exact:!0,path:"/",component:ne,isAuth:!!r}),Object(a.jsx)(l.a,{to:"/"})]})})})}var se=n(28),ie={checking:!0},le=n(95),ue={events:[{id:(new Date).getTime(),title:"Cumple",start:J()().toDate(),end:J()().add(2,"hours").toDate(),bgcolor:"#f3f3f3",user:{_id:543,name:"Momoy"}}],activeEvent:null},je={modalOpen:!1},be=Object(se.c)({ui:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h:return Object(P.a)(Object(P.a)({},e),{},{modalOpen:!0});case v:return Object(P.a)(Object(P.a)({},e),{},{modalOpen:!1});default:return e}},calendar:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g:return Object(P.a)(Object(P.a)({},e),{},{activeEvent:t.payload});case x:return Object(P.a)(Object(P.a)({},e),{},{events:[].concat(Object(le.a)(e.events),[t.payload])});case y:return Object(P.a)(Object(P.a)({},e),{},{activeEvent:null});case N:return Object(P.a)(Object(P.a)({},e),{},{events:e.events.map((function(e){return e.id===t.payload.id?t.payload:e}))});case w:return Object(P.a)(Object(P.a)({},e),{},{events:e.events.filter((function(t){return t.id!==e.activeEvent.id})),activeEvent:null});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C:return Object(P.a)(Object(P.a)(Object(P.a)({},e),t.payload),{},{checking:!1});case k:return Object(P.a)(Object(P.a)({},e),{},{checking:!1});case E:return{checking:!1};default:return e}}}),de=n(94),me="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||se.d,Oe=Object(se.e)(be,me(Object(se.a)(de.a)));n(176);function fe(){return Object(a.jsx)(s.a,{store:Oe,children:Object(a.jsx)(oe,{})})}o.a.render(Object(a.jsx)(fe,{}),document.getElementById("root"))}},[[177,1,2]]]);
//# sourceMappingURL=main.d74e3b61.chunk.js.map